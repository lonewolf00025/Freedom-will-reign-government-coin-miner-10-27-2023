<!DOCTYPE html>
<html>
<head>
    <title>Clicker Game</title>
    <link type="text/css" rel="stylesheet" href="login page/css scripts/acount scripts/acount css.css">
</head>
<body>
    <div class="p1">
        <h1>Goverment Curency Citzen Login</h1>    
    </div>
    <div class="p2" id="tabs">
        <!-- Tab Buttons -->
        <button class="tab-button active-button" id="login-tab-button" onclick="switchTab('login-tab')">Login</button>
        <button class="tab-button" id="register-tab-button" onclick="switchTab('register-tab')">Register</button>
        <button class="tab-button" id="delete-tab-button" onclick="switchTab('delete-tab')">Delete Account</button>
    </div>
    <!-- Login Tab -->
    <div class="tab active-tab" id="login-tab">
        <div class="p3">
            <h2>Login</h2>
            <form>
                <label for="loginUsername">Username:</label>
                <input type="text" id="loginUsername" name="loginUsername" required><br><br>
                <input type="button" value="Login" onclick="checkLogin()">
            </form>
        </div>
    </div>

    <!-- Registration Tab -->
    <div class="tab" id="register-tab">
        <div class="p3">
            <h2>Register</h2>
            <form>
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" required><br><br>
                <input type="button" value="Register Username" onclick="registerUser()">
            </form> 
        </div>
    </div>
    <!-- Delete Account Tab -->
    <div class="tab" id="delete-tab">
        <div class="p3">
            <h2>Delete Account</h2>
            <form>
                <label for="deleteUsername">Username:</label>
                <input type="text" id="deleteUsername" name="deleteUsername" required><br><br>
                <input type="button" value="Delete Account" onclick="deleteAccount()">
            </form>
        </div>
    </div>

    <script>
        // JavaScript functions
        function switchTab(tabName) {
            var tabs = document.getElementsByClassName("tab");
            for (var i = 0; i < tabs.length; i++) {
                tabs[i].style.display = "none";
            }

            var buttons = document.getElementsByClassName("tab-button");
            for (var i = 0; i < buttons.length; i++) {
                buttons[i].classList.remove("active-button");
            }

            document.getElementById(tabName).style.display = "block";
            document.getElementById(tabName + "-button").classList.add("active-button");
        }

        function checkLogin() {
            var enteredUsername = document.getElementById("loginUsername").value;
            var storedUsernames = JSON.parse(localStorage.getItem("usernames")) || [];
            var currentUser = localStorage.getItem("currentUser");

            if (storedUsernames.includes(enteredUsername)) {
                // Set the current user in local storage
                localStorage.setItem("currentUser", enteredUsername);

                // Redirect to the game if the username matches a stored username
                window.location.href = "miners page/miners.html";
            } else {
                alert("Invalid username. Please try again.");
            }
        }

        function registerUser() {
            var usernameInput = document.getElementById("username");
            var username = usernameInput.value;

            // Check if the username input is not empty
            if (username.trim() !== "") {
                // Retrieve the list of stored usernames from local storage
                var storedUsernames = JSON.parse(localStorage.getItem("usernames")) || [];

                if (!storedUsernames.includes(username)) {
                    // If the username is not already taken, add it to the list of stored usernames
                    storedUsernames.push(username);
                    localStorage.setItem("usernames", JSON.stringify(storedUsernames));

                    // Redirect to the login tab
                    switchTab('login-tab');
                } else {
                    // If the username is already taken, display an alert message
                    alert("Username already taken. Please choose a different one.ðŸ˜‡");
                }
            } else {
                alert("Please enter a valid username.");
            }
        }
        function deleteAccount() {
            var usernameToDelete = document.getElementById("deleteUsername").value;
            var storedUsernames = JSON.parse(localStorage.getItem("usernames")) || [];

            if (storedUsernames.includes(usernameToDelete)) {
                // Remove the username from the list of stored usernames
                var updatedUsernames = storedUsernames.filter(function (username) {
                    return username !== usernameToDelete;
                });

                // Update the list of stored usernames in local storage
                localStorage.setItem("usernames", JSON.stringify(updatedUsernames));
                // Clear any other data related to the deleted account (you can add more code here)
                localStorage.setItem("currentUser",[])
                for (let mode of ["Easymode", "Mediummode", "Hardmode"]) {
                    for (let i = 1; i <= 3; i++) {
                    const key = `${usernameToDelete}HuskyCoin${mode}Savegame${i}`;
                    localStorage.removeItem(key);
                    }
                }
                alert("Account deleted successfully.");
            } else {
                alert("Username not found. Please enter a valid username.");
            }
        }


        // Initially, show the login tab as active
        switchTab('login-tab');
    </script>
</body>
</html>
